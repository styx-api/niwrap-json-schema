{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "antsJointFusion",
  "description": "antsJointFusion is an image fusion algorithm developed by Hongzhi Wang and Paul Yushkevich. This implementation is based on Paul's original ITK-style implementation and Brian's ANTsR implementation. The original label fusion framework was extended to accommodate intensities.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "ants/antsJointFusion"
    },
    "image_dimensionality": {
      "anyOf": [
        {
          "type": "integer",
          "enum": [
            2,
            3,
            4
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Image Dimensionality",
      "description": "This option forces the image to be treated as a specified-dimensional image. If not specified, the program tries to infer the dimensionality from the input image."
    },
    "target_image": {
      "type": "array",
      "items": {
        "type": "string",
        "x-styx-type": "file"
      },
      "title": "Target Image",
      "description": "The target image (or multimodal target images) assumed to be aligned to a common image domain."
    },
    "atlas_image": {
      "type": "array",
      "items": {
        "type": "string",
        "x-styx-type": "file"
      },
      "title": "Atlas Image",
      "description": "The atlas image (or multimodal atlas images) assumed to be aligned to a common image domain."
    },
    "atlas_segmentation": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Atlas Segmentation",
      "description": "The atlas segmentation images. For performing label fusion the number of specified segmentations should be identical to the number of atlas image sets."
    },
    "alpha": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Alpha",
      "description": "Regularization term added to matrix Mx for calculating the inverse. Default = 0.1."
    },
    "beta": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Beta",
      "description": "Exponent for mapping intensity difference to the joint error. Default = 2.0."
    },
    "constrain_nonnegative": {
      "anyOf": [
        {
          "type": "integer",
          "enum": [
            0,
            1
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Constrain Non-negative",
      "description": "Constrain solution to non-negative weights."
    },
    "patch_radius": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Patch Radius",
      "description": "Patch radius for similarity measures. Default = 2x2x2."
    },
    "patch_metric": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "PC",
            "MSQ"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Patch Metric",
      "description": "Metric to be used in determining the most similar neighborhood patch. Options include Pearson's correlation (PC) and mean squares (MSQ). Default = PC (Pearson correlation)."
    },
    "search_radius": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Search Radius",
      "description": "Search radius for similarity measures. Default = 3x3x3. One can also specify an image where the value at the voxel specifies the isotropic search radius at that voxel."
    },
    "exclusion_image": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Exclusion Image",
      "description": "Specify an exclusion region for the given label."
    },
    "mask_image": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask Image",
      "description": "If a mask image is specified, fusion is only performed in the mask region."
    },
    "output": {
      "type": "string",
      "title": "Output",
      "description": "The output is the intensity and/or label fusion image. Additional optional outputs include the label posterior probability images and the atlas voting weight images."
    },
    "verbose": {
      "anyOf": [
        {
          "type": "integer",
          "enum": [
            0,
            1
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Verbose",
      "description": "Verbose output."
    }
  },
  "additionalProperties": false,
  "required": [
    "target_image",
    "atlas_image",
    "atlas_segmentation",
    "output",
    "@type"
  ]
}