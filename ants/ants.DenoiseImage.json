{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Denoise an image using a spatially adaptive filter originally described in J. V. Manjon, P. Coupe, Luis Marti-Bonmati, D. L. Collins, and M. Robles. Adaptive Non-Local Means Denoising of MR Images With Spatially Varying Noise Levels, Journal of Magnetic Resonance Imaging, 31:192-203, June 2010.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "ants.DenoiseImage"
    },
    "image_dimensionality": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Image dimensionality",
      "description": "-d, --image-dimensionality 2/3/4. This option forces the image to be treated as a specified-dimensional image. If not specified, the program tries to infer the dimensionality from the input image."
    },
    "noise_model": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Noise model",
      "description": "-n, --noise-model Rician/(Gaussian). Employ a Rician or Gaussian noise model."
    },
    "shrink_factor": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Shrink factor",
      "description": "-s, --shrink-factor (1)/2/3/... Running noise correction on large images can be time consuming. To lessen computation time, the input image can be resampled. The shrink factor, specified as a single integer, describes this resampling. Shrink factor = 1 is the default."
    },
    "mask_image": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask image",
      "description": "-x, --mask-image maskImageFilename. If a mask image is specified, denoising is only performed in the mask region."
    },
    "patch_radius": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Patch radius",
      "description": "-p, --patch-radius 1x1x1. Patch radius. Default is 1x1x1."
    },
    "search_radius": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Search radius",
      "description": "-r, --search-radius 2x2x2. Search radius. Default is 2x2x2."
    },
    "verbose": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Verbose",
      "description": "Verbose output."
    },
    "input_image": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Input image",
      "description": "-i, --input-image inputImageFilename. A scalar image is expected as input for noise correction."
    },
    "output": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "correctedOutput"
            },
            "correctedOutputFileName": {
              "type": "string",
              "title": "Denoised output file name",
              "description": "Output file name."
            }
          },
          "additionalProperties": false,
          "description": "Denoised version of the input image.",
          "required": [
            "correctedOutputFileName"
          ]
        },
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "correctedOutputNoise"
            },
            "correctedOutputFileName": {
              "type": "string",
              "title": "Denoised output file name",
              "description": "Output file name."
            },
            "noiseFile": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "Noise output file name",
              "description": "Output noise map image."
            }
          },
          "additionalProperties": false,
          "description": "Denoised version of the input image, along with noise image.",
          "required": [
            "correctedOutputFileName"
          ]
        }
      ],
      "title": "output",
      "description": "The denoised version of the input image, with optional noise map image."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_image",
    "output"
  ]
}