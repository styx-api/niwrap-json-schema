{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Simulate displacement fields using various methods such as BSpline or Exponential.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "ants.SimulateDisplacementField"
    },
    "image_dimension": {
      "type": "integer",
      "title": "Image Dimension",
      "description": "Dimensionality of the image."
    },
    "displacement_field_type": {
      "type": "string",
      "title": "Displacement Field Type",
      "description": "Type of displacement field to simulate."
    },
    "domain_image": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Domain Image",
      "description": "Image defining the domain for the displacement field."
    },
    "output_field": {
      "type": "string",
      "title": "Output Field",
      "description": "Path to save the output displacement field."
    },
    "number_of_random_points": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": 1000,
      "title": "Number of Random Points",
      "description": "Number of random points to use in the simulation."
    },
    "standard_deviation_displacement_field": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": 10,
      "title": "Standard Deviation Displacement Field",
      "description": "Standard deviation for the displacement field."
    },
    "enforce_stationary_boundary": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": 1,
      "title": "Enforce Stationary Boundary",
      "description": "Boolean flag indicating whether to enforce stationary boundary."
    },
    "displacement_specific_options": {
      "anyOf": [
        {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "@type": {
                  "const": "bspline_options"
                },
                "number_of_fitting_levels": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": 4,
                  "title": "Number of Fitting Levels",
                  "description": "Number of fitting levels for BSpline."
                },
                "number_of_control_points": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": 4,
                  "title": "Number of Control Points",
                  "description": "Number of control points for BSpline."
                }
              },
              "additionalProperties": false
            },
            {
              "type": "object",
              "properties": {
                "@type": {
                  "const": "exponential_options"
                },
                "smoothing_standard_deviation": {
                  "anyOf": [
                    {
                      "type": "number"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "default": 4,
                  "title": "Smoothing Standard Deviation",
                  "description": "Smoothing standard deviation for Exponential."
                }
              },
              "additionalProperties": false
            }
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Displacement Specific Options",
      "description": "Options specific to the type of displacement field simulation."
    }
  },
  "additionalProperties": false,
  "required": [
    "image_dimension",
    "displacement_field_type",
    "domain_image",
    "output_field"
  ]
}