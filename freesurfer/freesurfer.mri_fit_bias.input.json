{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "mri_fit_bias",
  "description": "A tool for intensity normalization and bias correction in MRI images.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer.mri_fit_bias"
    },
    "inputvol": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Input Volume",
      "description": "Input volume for intensity normalization"
    },
    "lpf_cutoff": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": 23.0,
      "title": "Low-pass Filter Cutoff",
      "description": "Low-pass filter cutoff in mm (default is 23.000000)"
    },
    "segvol": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Segmentation Volume",
      "description": "Segmentation volume to define WM and Cortex (e.g., aseg.presurf.mgz)"
    },
    "maskvol": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Mask Volume",
      "description": "Mask volume; zero everything outside of the mask (e.g., brainmask.mgz)"
    },
    "outvol": {
      "type": "string",
      "title": "Output Volume",
      "description": "Bias corrected output volume"
    },
    "biasfield": {
      "type": "string",
      "title": "Bias Field",
      "description": "Output bias field"
    },
    "dctvol": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "DCT Volume",
      "description": "DCT fields file for debugging"
    },
    "threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Threshold Value",
      "description": "Mask out anything <= threshold value"
    },
    "nerode": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": 1,
      "title": "Erode Steps",
      "description": "3D erode segmentation by n steps (default is 1)"
    },
    "nthreads": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Threads",
      "description": "Number of threads to use"
    },
    "debug": {
      "type": "boolean",
      "default": false,
      "title": "Debug Flag",
      "description": "Turn on debugging mode"
    },
    "checkopts": {
      "type": "boolean",
      "default": false,
      "title": "Check Options Flag",
      "description": "Don't run anything, just check options and exit"
    }
  },
  "additionalProperties": false,
  "required": [
    "inputvol",
    "segvol",
    "maskvol",
    "outvol",
    "biasfield"
  ]
}