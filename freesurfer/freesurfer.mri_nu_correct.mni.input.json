{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "mri_nu_correct.mni",
  "description": "Wrapper for nu_correct, used for correcting intensity non-uniformity (bias fields).",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer.mri_nu_correct.mni"
    },
    "input_volume": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Input Volume",
      "description": "Input volume. Can be any format accepted by mri_convert."
    },
    "output_volume": {
      "type": "string",
      "title": "Output Volume",
      "description": "Output volume. Can be any format accepted by mri_convert."
    },
    "iterations": {
      "type": "number",
      "title": "Number of Iterations",
      "description": "Number of iterations to run nu_correct. Default is 4."
    },
    "proto_iterations": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prototype Iterations",
      "description": "Passes as argument of the -iterations flag of nu_correct."
    },
    "mask_volume": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask Volume",
      "description": "Brainmask volume. Can be any format accepted by mri_convert."
    },
    "stop_threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Stop Threshold",
      "description": "Threshold for stopping iteration. Suggest values between 0.01 to 0.0001."
    },
    "uchar_transform": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "UChar Transform",
      "description": "Use mri_make_uchar instead of conforming."
    },
    "ants_n3": {
      "type": "boolean",
      "default": false,
      "title": "ANTS N3 Flag",
      "description": "Run N3 using ANTS N3BiasFieldCorrection."
    },
    "ants_n4": {
      "type": "boolean",
      "default": false,
      "title": "ANTS N4 Flag",
      "description": "Run N4 using ANTS N4BiasFieldCorrection."
    },
    "no_uchar": {
      "type": "boolean",
      "default": false,
      "title": "No UChar Flag",
      "description": "Do not use mri_make_uchar (default)."
    },
    "ants_n4_replace_zeros": {
      "type": "boolean",
      "default": false,
      "title": "ANTS N4 Replace Zeros Flag",
      "description": "Replace 0s with small random numbers then remove after nu correction."
    },
    "cm_flag": {
      "type": "boolean",
      "default": false,
      "title": "CM Flag",
      "description": "For use with data that is higher than 1mm resolution."
    },
    "debug_flag": {
      "type": "boolean",
      "default": false,
      "title": "Debug Flag",
      "description": "Turn on debugging."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_volume",
    "output_volume",
    "iterations"
  ]
}