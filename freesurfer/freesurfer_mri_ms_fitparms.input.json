{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "mri_ms_fitparms",
  "description": "Tool for estimating T1 and PD values from FLASH images and applying transformations.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer/mri_ms_fitparms"
    },
    "volumes": {
      "type": "array",
      "items": {
        "type": "string",
        "x-styx-type": "file"
      },
      "title": "Input Volumes",
      "description": "List of 3D FLASH images with different flip angles."
    },
    "output_dir": {
      "type": "string",
      "title": "Output Directory",
      "description": "Output directory"
    },
    "afi_flag": {
      "type": "boolean",
      "default": false,
      "title": "AFI Flag",
      "description": "Designate flip angle map to use with nominal value 60 degrees"
    },
    "ait_flag": {
      "type": "boolean",
      "default": false,
      "title": "Inverse Transform Flag",
      "description": "Apply inverse of transform"
    },
    "at": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Acquisition Time",
      "description": "Set acquisition time"
    },
    "conform_flag": {
      "type": "boolean",
      "default": false,
      "title": "Conform to Isotropic 1mm^3",
      "description": "Interpolate volume to be isotropic 1mm^3"
    },
    "correct_flag": {
      "type": "boolean",
      "default": false,
      "title": "Correct PD by T2*",
      "description": "Correct proton density map (PD) by T2* estimates"
    },
    "cubic_flag": {
      "type": "boolean",
      "default": false,
      "title": "Cubic Interpolation Flag",
      "description": "Use cubic interpolation (NOT WORKING!)"
    },
    "debug_slice_flag": {
      "type": "boolean",
      "default": false,
      "title": "Debug Slice Flag",
      "description": "Debug slice processing ???"
    },
    "debug_voxel_flag": {
      "type": "boolean",
      "default": false,
      "title": "Debug Voxel Flag",
      "description": "Debug voxel processing ???"
    },
    "dt": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Time Step",
      "description": "Set time step dt ???"
    },
    "fa": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Flip Angle",
      "description": "Set flip angle"
    },
    "fa_scale": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Flip Angle Scale",
      "description": "Set value to scale all flip angles by"
    },
    "faf": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Flip Angle Map",
      "description": "Designate flip angle map to use with specified control points"
    },
    "fsmooth": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Flip Angle Smoothing",
      "description": "Smooth flip angle map for X iterations of soap bubble smoothing"
    },
    "invert_flag": {
      "type": "boolean",
      "default": false,
      "title": "Invert Flag",
      "description": "Invert volumes"
    },
    "momentum": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Momentum",
      "description": "Set momentum"
    },
    "max_t2": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Max T2*",
      "description": "Set max T2*"
    },
    "n_iter": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Iterations",
      "description": "Perform estimation/motion correction X times"
    },
    "nearest_flag": {
      "type": "boolean",
      "default": false,
      "title": "Nearest Neighbor Interpolation",
      "description": "Use nearest-neighbor interpolation"
    },
    "nocompress_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Compress Flag",
      "description": "Do not compress output volumes (save as .mgh)"
    },
    "nosynth_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Synthesis Flag",
      "description": "Disable volume synthesis"
    },
    "residuals": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Residuals",
      "description": "Write out residuals to designated location"
    },
    "smooth_sigma": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Faf Smoothing Sigma",
      "description": "Smooth faf field with sigma=X"
    },
    "scale_factor": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Scale Factor",
      "description": "Scale volumes by X after reading"
    },
    "sinc_flag": {
      "type": "boolean",
      "default": false,
      "title": "Sinc Interpolation Flag",
      "description": "Use sinc interpolation (default window width is 6)"
    },
    "transform_flag": {
      "type": "boolean",
      "default": false,
      "title": "Transform Flag",
      "description": "Apply transform to output volumes"
    },
    "echo_time": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Echo Time",
      "description": "Set echo time (TE) in ms"
    },
    "repetition_time": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Repetition Time",
      "description": "Set repetition time (TR) in ms"
    },
    "trilinear_flag": {
      "type": "boolean",
      "default": false,
      "title": "Trilinear Interpolation Flag",
      "description": "Use trilinear interpolation"
    },
    "tukey_flag": {
      "type": "boolean",
      "default": false,
      "title": "Tukey Bi-weight Flag",
      "description": "Use Tukey bi-weight of residuals"
    },
    "help_flag": {
      "type": "boolean",
      "default": false,
      "title": "Help Flag",
      "description": "Display help text"
    },
    "use_brain_mask_flag": {
      "type": "boolean",
      "default": false,
      "title": "Use Brain Mask Flag",
      "description": "Compute a brain mask from the PD map and use it for registration"
    },
    "write_intermediate": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Write Intermediate Frequency",
      "description": "Write out intermediate results every X iterations"
    },
    "extract_subimage": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Subimage Extraction Coordinates",
      "description": "Extract a subimage for each input image, specified by x0 y0 z0 dx dy dz"
    },
    "window_flag": {
      "type": "boolean",
      "default": false,
      "title": "Window Flag",
      "description": "Not implemented"
    }
  },
  "additionalProperties": false,
  "required": [
    "volumes",
    "output_dir"
  ]
}