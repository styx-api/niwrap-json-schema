{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Optseq2 is a tool for automatically scheduling events for rapid-presentation event-related (RPER) fMRI experiments.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer.optseq2"
    },
    "ntp": {
      "type": "number",
      "title": "Number of Time Points",
      "description": "Number of time points to be acquired during the scan."
    },
    "tr": {
      "type": "number",
      "title": "Temporal Resolution",
      "description": "Temporal resolution of acquisition in seconds."
    },
    "tprescan": {
      "type": "number",
      "title": "Pre-scan Time",
      "description": "Start events t seconds before first acquisition."
    },
    "psdwin": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "minItems": 2,
      "maxItems": 3,
      "title": "PSD Window",
      "description": "Post-stimulus window specifications: minimum PSD, maximum PSD, and optional dPSD."
    },
    "event": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Event",
      "description": "Event type specification with label, duration, and number of repetitions."
    },
    "repvar": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Repetition Variation",
      "description": "Allow number of repetitions of event types to vary by percentage, optionally per event."
    },
    "polyfit": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Polynomial Fit Order",
      "description": "Add polynomial regressors as nuisance variables of specified order."
    },
    "tnullmin": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Minimum Null Duration",
      "description": "Minimum duration of null time between stimuli in seconds."
    },
    "tnullmax": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Maximum Null Duration",
      "description": "Maximum duration of null time between stimuli in seconds."
    },
    "nsearch": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of Searches",
      "description": "Search over a specified number of iterations for schedules."
    },
    "tsearch": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Search Time",
      "description": "Search for schedules over a specified number of hours."
    },
    "first_order_cb": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "First Order Counter-Balancing",
      "description": "Pre-optimize first order counter-balancing."
    },
    "ar1": {
      "anyOf": [
        {
          "type": "number",
          "minimum": -1,
          "maximum": 1
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "AR1 Parameter",
      "description": "Optimize assuming whitening with AR1 parameter"
    },
    "penalize": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Presentation Penalty",
      "description": "Penalize for presentations being too close with parameters alpha, T, and dtmin."
    },
    "evc": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Event Contrast",
      "description": "Contrast of event types with weights."
    },
    "cmtx": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Contrast Matrix",
      "description": "Load contrast from ASCII matrix file."
    },
    "cost": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Cost Function",
      "description": "Specify cost function and its parameters."
    },
    "sumdelays": {
      "type": "boolean",
      "default": false,
      "title": "Sum Delays",
      "description": "Sum delays when forming contrast matrix."
    },
    "seed": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Random Seed",
      "description": "Initialize random number generator with seed value."
    },
    "nkeep": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number Keep",
      "description": "Number of best schedules to keep."
    },
    "outstem": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output Stem",
      "description": "Output stem for saved schedules."
    },
    "mtxstem": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Matrix Stem",
      "description": "Output stem for saved design matrices."
    },
    "cmtxfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Contrast Matrix File",
      "description": "File for saving contrast matrix."
    },
    "summaryfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Summary File",
      "description": "File for saving search summary."
    },
    "logfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Log File",
      "description": "File for saving log information."
    },
    "pctupdate": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Percent Update",
      "description": "Percentage interval after which progress is logged."
    },
    "sviterfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Save Iteration Information",
      "description": "File to save information from each iteration."
    },
    "instem": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input Stem",
      "description": "Initialize with input schedules that match instem-RRR.par."
    },
    "input_schedule": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input Schedule",
      "description": "Input schedule files."
    },
    "nosearch": {
      "type": "boolean",
      "default": false,
      "title": "No Search Flag",
      "description": "Do not perform search for optimal schedules."
    },
    "help": {
      "type": "boolean",
      "default": false,
      "title": "Help Flag",
      "description": "Print help page."
    },
    "version": {
      "type": "boolean",
      "default": false,
      "title": "Version Flag",
      "description": "Print version string."
    }
  },
  "additionalProperties": false,
  "required": [
    "ntp",
    "tr",
    "tprescan",
    "psdwin"
  ]
}