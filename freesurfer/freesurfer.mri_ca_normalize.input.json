{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "mri_ca_normalize",
  "description": "This program creates a normalized volume using the brain volume and an input gca file.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer/mri_ca_normalize"
    },
    "input_brain_volumes": {
      "type": "array",
      "items": {
        "type": "string",
        "x-styx-type": "file"
      },
      "title": "Input Brain Volumes",
      "description": "Input brain volume(s). Can specify multiple inputs."
    },
    "atlas_file": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Atlas File",
      "description": "Atlas file in GCA format."
    },
    "xform_file": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Transform File",
      "description": "Transform file in LTA format."
    },
    "output_volumes": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "title": "Output Volumes",
      "description": "Output volume(s) in either mgh or mgz format. Can specify multiple outputs."
    },
    "seg_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Segmentation File",
      "description": "Aseg file to help normalization."
    },
    "sigma_value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Smoothing Sigma",
      "description": "Smoothing sigma for bias field if control points specified (default=4)."
    },
    "fsamples_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Fsamples File",
      "description": "Write control points to filename."
    },
    "dilate_iters": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Dilate Iterations",
      "description": "Dilate the brain mask niters times before masking."
    },
    "nsamples_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Nsamples File",
      "description": "Write transformed normalization control points to filename."
    },
    "mask_vol": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask Volume",
      "description": "Use mri_vol to mask input."
    },
    "control_points_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Control Points File",
      "description": "Define control points from filename."
    },
    "fonly_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Fonly File",
      "description": "Only use control points from filename."
    },
    "diag_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Diagnostic File",
      "description": "Write to log file."
    },
    "debug_voxel_coords": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Debug Voxel Coordinates",
      "description": "Debug voxel. Needs x, y, z coordinates."
    },
    "debug_node_coords": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Debug Node Coordinates",
      "description": "Debug node. Needs x, y, z coordinates."
    },
    "tr_value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "TR Value",
      "description": "Set TR in msec."
    },
    "te_value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "TE Value",
      "description": "Set TE in msec."
    },
    "alpha_value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Alpha Value",
      "description": "Set alpha in radians."
    },
    "example_mri_vol": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Example MRI Volume",
      "description": "Use T1 (mri_vol) and segmentation as example."
    },
    "extra_norm_pctl": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Extra Norm PCT",
      "description": "Use 1+pct and 1-pct to widen the range of T1 values."
    },
    "prior_threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prior Threshold",
      "description": "Use prior threshold t (default=.6)."
    },
    "n_regions": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of Regions",
      "description": "Use n regions/struct for normalization."
    },
    "verbose_value": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Verbose Value",
      "description": "Used for debugging and diagnostics."
    },
    "top_percent": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Top Percent",
      "description": "Use top p percent (default=.25) white matter points as control points."
    },
    "novar_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Variance Flag",
      "description": "Do not use variance estimates."
    },
    "renorm_file": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Renormalize File",
      "description": "Renormalize using predicted intensity values in mri_vol."
    },
    "flash_flag": {
      "type": "boolean",
      "default": false,
      "title": "Flash Flag",
      "description": "Use FLASH forward model to predict intensity values."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_brain_volumes",
    "atlas_file",
    "xform_file",
    "output_volumes",
    "@type"
  ]
}