{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Script to prepare surface-based data for high-level analysis by resampling surface or volume source data to a common subject and concatenating them into one file.",
  "type": "object",
  "properties": {
    "__STYXTYPE__": {
      "const": "mris_preproc"
    },
    "outfile": {
      "type": "string",
      "title": "Output File",
      "description": "Save output here."
    },
    "target_subject": {
      "type": "string",
      "title": "Target Subject",
      "description": "Subject to use as the common-space. All input data will be resampled to the surface of this subject."
    },
    "hemi": {
      "type": "string",
      "title": "Hemisphere",
      "description": "Use hemisphere for source and target surfaces. Can be lh or rh."
    },
    "meas": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Surface Measure",
      "description": "Use subject/surf/hemi.surfmeasure as input. Implies --srcfmt curv."
    },
    "label": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Label",
      "description": "Look in label/hemi.annotname.(annot,mgz) and use mapmethod nnf."
    },
    "measdir": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Measure Directory",
      "description": "Look in subdir instead of surf."
    },
    "subjects": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Subjects",
      "description": "Specify an input subject on the command-line. All subjects must be specified in this way."
    },
    "fsgd": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "FSGD File",
      "description": "Specify the list of input subjects from the fsgd file."
    },
    "subjectlist": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Subject List File",
      "description": "List all subjects separated by white space in subjlistfile."
    },
    "qdec": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "QDEC Table",
      "description": "Specify list of subjects via qdec table file. Assumes the first column is the \"fsid\"."
    },
    "qdec_long": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "QDEC Longitudinal Table",
      "description": "Specify list of subjects via longitudinal qdec table file."
    },
    "surfmeasfile": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Surface Measure File",
      "description": "Specify full path to input surface measure file."
    },
    "volmeasfile_reg": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Volume Measure and Registration Files",
      "description": "Specify full path to a volume file and its registration matrix file."
    },
    "projfrac": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Projection Fraction",
      "description": "When sampling a volume onto the surface, sample a fraction of the thickness along the surface normal."
    },
    "projfrac_max": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Projection Fraction Max",
      "description": "When sampling a volume onto the surface, find max along projection for vol2surf."
    },
    "projfrac_avg": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 3,
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Projection Fraction Average",
      "description": "Compute average along projection for vol2surf."
    },
    "no_mask_non_cortex": {
      "type": "boolean",
      "default": false,
      "title": "No Mask Non-Cortex Flag",
      "description": "Do not mask out non-cortex in vol2surf."
    },
    "session_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Session File",
      "description": "FS-FAST session file."
    },
    "dir_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Directory File",
      "description": "FS-FAST session directory file."
    },
    "analysis": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Analysis",
      "description": "FS-FAST analysis."
    },
    "contrast": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Contrast",
      "description": "FS-FAST contrast."
    },
    "cvar_flag": {
      "type": "boolean",
      "default": false,
      "title": "CVar Flag",
      "description": "Use fsfast contrast variance (cesvar)."
    },
    "offset_flag": {
      "type": "boolean",
      "default": false,
      "title": "Offset Flag",
      "description": "Use fsfast mean offset (h-offset)."
    },
    "map": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Map",
      "description": "Use fsfast contrast/map."
    },
    "etiv_flag": {
      "type": "boolean",
      "default": false,
      "title": "ETIV Flag",
      "description": "Divide each subject's value by the Estimated Total Intra Cranial Volume as found in aseg.stats."
    },
    "fwhm": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "FWHM Smoothing",
      "description": "Smooth by fwhm mm on the target surface."
    },
    "fwhm_src": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "FWHM Source Smoothing",
      "description": "Smooth by fwhm mm on the source surface."
    },
    "niters": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of Iterations Smoothing",
      "description": "Smooth by niters on the target surface."
    },
    "niters_src": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Source Smoothing Iterations",
      "description": "Smooth by niters on the source surface."
    },
    "cortex_only": {
      "type": "boolean",
      "default": false,
      "title": "Cortex Only Flag",
      "description": "Exclude medial wall."
    },
    "mgz_flag": {
      "type": "boolean",
      "default": false,
      "title": "MGZ Format Flag",
      "description": "Use mgz format internally."
    },
    "no_jac_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Jacobian Flag",
      "description": "Turn off jacobian correction."
    },
    "paired_diff_flag": {
      "type": "boolean",
      "default": false,
      "title": "Paired Difference Flag",
      "description": "Compute paired differences after concatenating all inputs together."
    },
    "cache_out": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Cache Output",
      "description": "Cache the output in the specified cache file."
    },
    "cache_in": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Cache Input",
      "description": "Use the pre-computed cached data from the specified cache file."
    },
    "cache_out_only": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Cache Output Only",
      "description": "Cache data without actually creating an output."
    },
    "no_prune_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Prune Flag",
      "description": "Do not prune the inputs."
    },
    "mean_flag": {
      "type": "boolean",
      "default": false,
      "title": "Mean Flag",
      "description": "Compute the mean of all inputs."
    },
    "std_flag": {
      "type": "boolean",
      "default": false,
      "title": "Standard Deviation Flag",
      "description": "Compute the standard deviation of all inputs."
    },
    "reshape_flag": {
      "type": "boolean",
      "default": false,
      "title": "Reshape Flag",
      "description": "Reshape spatial dimensions."
    },
    "surfreg": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Surface Registration",
      "description": "Use specified surface registration to the common space."
    },
    "subjects_dir": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Subjects Directory",
      "description": "Set SUBJECTS_DIR environment variable."
    },
    "synth_flag": {
      "type": "boolean",
      "default": false,
      "title": "Synthesize Flag",
      "description": "Synthesize the input data with white gaussian noise."
    },
    "tmpdir": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Temporary Directory",
      "description": "Use specified temporary directory."
    },
    "nocleanup_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Cleanup Flag",
      "description": "Do not delete temporary files."
    },
    "cleanup_flag": {
      "type": "boolean",
      "default": false,
      "title": "Cleanup Flag",
      "description": "Delete temporary files (default)."
    },
    "log": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Log File",
      "description": "Specify log file."
    },
    "nolog_flag": {
      "type": "boolean",
      "default": false,
      "title": "No Log Flag",
      "description": "Do not create a log file."
    },
    "debug_flag": {
      "type": "boolean",
      "default": false,
      "title": "Debug Flag",
      "description": "Enable debug mode."
    }
  },
  "additionalProperties": false,
  "required": [
    "outfile",
    "target_subject",
    "hemi"
  ]
}