{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Runs N4 (nonparameteric, nonuniform normalization) retrospective bias correction on an image. This program wraps the AntsN4BiasFieldCorrection utility available in the ANTs package.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "freesurfer.AntsN4BiasFieldCorrectionFs"
    },
    "input_file": {
      "type": "string",
      "title": "Input File",
      "description": "Input volume file."
    },
    "output_file": {
      "type": "string",
      "title": "Output File",
      "description": "Corrected output volume file."
    },
    "mask_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask File",
      "description": "Use image mask during correction."
    },
    "shrink_factor": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": 4,
      "title": "Shrink Factor",
      "description": "Resample factor to decrease computation time. Default is 4."
    },
    "iterations": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Iterations",
      "description": "Number of resolutions and max iterations per resolution. Default is `50 50 50 50`, which indicates 4 fitting levels with 50 iterations each."
    },
    "output_dtype": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": "float",
      "title": "Output Data Type",
      "description": "Corrected output data type. Can be float, uchar, or int. Default is float."
    },
    "replace_zeros": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Replace Zeros",
      "description": "Replace 0s with offset + scale*rand(). Values will be remasked in the output if remask=1."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_file",
    "output_file"
  ]
}