{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "volume-dilate",
  "description": "Dilate a volume file.\n\nFor all voxels that are designated as bad, if they neighbor a non-bad voxel with data or are within the specified distance of such a voxel, replace the value in the bad voxel with a value calculated from nearby non-bad voxels that have data, otherwise set the value to zero.  No matter how small <distance> is, dilation will always use at least the face neighbor voxels.\n\nBy default, voxels that have data with the value 0 are bad, specify -bad-voxel-roi to only count voxels as bad if they are selected by the roi.  If -data-roi is not specified, all voxels are assumed to have data.\n\nTo get the behavior of version 1.3.2 or earlier, use '-legacy-cutoff -exponent 2'.\n\nValid values for <method> are:\n\nNEAREST - use the value from the nearest good voxel\nWEIGHTED - use a weighted average based on distance",
  "type": "object",
  "properties": {
    "@type": {
      "const": "workbench.volume-dilate"
    },
    "volume": {
      "type": "string",
      "x-styx-type": "file",
      "title": "volume",
      "description": "the volume to dilate"
    },
    "distance": {
      "type": "number",
      "title": "distance",
      "description": "distance in mm to dilate"
    },
    "method": {
      "type": "string",
      "title": "method",
      "description": "dilation method to use"
    },
    "volume_out": {
      "type": "string",
      "title": "volume_out",
      "description": "the output volume"
    },
    "opt_exponent_exponent": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_exponent_exponent",
      "description": "use a different exponent in the weighting function: exponent 'n' to use in (1 / (distance ^ n)) as the weighting function (default 7)"
    },
    "opt_bad_voxel_roi_roi_volume": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_bad_voxel_roi_roi_volume",
      "description": "specify an roi of voxels to overwrite, rather than voxels with value zero: volume file, positive values denote voxels to have their values replaced"
    },
    "opt_data_roi_roi_volume": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_data_roi_roi_volume",
      "description": "specify an roi of where there is data: volume file, positive values denote voxels that have data"
    },
    "opt_subvolume_subvol": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_subvolume_subvol",
      "description": "select a single subvolume to dilate: the subvolume number or name"
    },
    "opt_legacy_cutoff": {
      "type": "boolean",
      "default": false,
      "title": "opt_legacy_cutoff",
      "description": "use the v1.3.2 method of excluding voxels further than the dilation distance when calculating the dilated value"
    },
    "grad_extrapolate": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "workbench.volume-dilate.grad_extrapolate"
            },
            "presmooth": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "@type": {
                      "const": "workbench.volume-dilate.grad_extrapolate.presmooth"
                    },
                    "kernel": {
                      "type": "number",
                      "title": "kernel",
                      "description": "the size of gaussian smoothing kernel in mm, as sigma by default"
                    },
                    "opt_fwhm": {
                      "type": "boolean",
                      "default": false,
                      "title": "opt_fwhm",
                      "description": "kernel size is FWHM, not sigma"
                    }
                  },
                  "additionalProperties": false,
                  "title": "presmooth",
                  "description": "apply presmoothing before computing gradient vectors, not recommended",
                  "required": [
                    "kernel"
                  ]
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "presmooth",
              "description": "apply presmoothing before computing gradient vectors, not recommended"
            }
          },
          "additionalProperties": false,
          "title": "grad_extrapolate",
          "description": "additionally use the gradient to extrapolate, intended to be used with WEIGHTED"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "grad_extrapolate",
      "description": "additionally use the gradient to extrapolate, intended to be used with WEIGHTED"
    }
  },
  "additionalProperties": false,
  "required": [
    "volume",
    "distance",
    "method",
    "volume_out"
  ]
}