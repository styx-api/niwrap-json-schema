{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "cifti-correlation",
  "description": "Generate correlation of rows in a cifti file.\n\nFor each row (or each row inside an roi if -roi-override is specified), correlate to all other rows.  The -cifti-roi suboption to -roi-override may not be specified with any other -*-roi suboption, but you may specify the other -*-roi suboptions together.\n\nWhen using the -fisher-z option, the output is NOT a Z-score, it is artanh(r), to do further math on this output, consider using -cifti-math.\n\nRestricting the memory usage will make it calculate the output in chunks, and if the input file size is more than 70% of the memory limit, it will also read through the input file as rows are required, resulting in several passes through the input file (once per chunk).  Memory limit does not need to be an integer, you may also specify 0 to calculate a single output row at a time (this may be very slow).",
  "type": "object",
  "properties": {
    "@type": {
      "const": "workbench/cifti-correlation"
    },
    "cifti": {
      "type": "string",
      "x-styx-type": "file",
      "title": "cifti",
      "description": "input cifti file"
    },
    "cifti_out": {
      "type": "string",
      "title": "cifti_out",
      "description": "output cifti file"
    },
    "roi_override": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "roi_override"
            },
            "opt_left_roi_roi_metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "opt_left_roi_roi_metric",
              "description": "use an roi for left hempsphere: the left roi as a metric file"
            },
            "opt_right_roi_roi_metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "opt_right_roi_roi_metric",
              "description": "use an roi for right hempsphere: the right roi as a metric file"
            },
            "opt_cerebellum_roi_roi_metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "opt_cerebellum_roi_roi_metric",
              "description": "use an roi for cerebellum: the cerebellum roi as a metric file"
            },
            "opt_vol_roi_roi_vol": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "opt_vol_roi_roi_vol",
              "description": "use an roi for volume: the volume roi file"
            },
            "opt_cifti_roi_roi_cifti": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "opt_cifti_roi_roi_cifti",
              "description": "use a cifti file for combined rois: the cifti roi file"
            }
          },
          "additionalProperties": false,
          "title": "roi_override",
          "description": "perform correlation from a subset of rows to all rows"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "roi_override",
      "description": "perform correlation from a subset of rows to all rows"
    },
    "opt_weights_weight_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_weights_weight_file",
      "description": "specify column weights: text file containing one weight per column"
    },
    "opt_fisher_z": {
      "type": "boolean",
      "default": false,
      "title": "opt_fisher_z",
      "description": "apply fisher small z transform (ie, artanh) to correlation"
    },
    "opt_no_demean": {
      "type": "boolean",
      "default": false,
      "title": "opt_no_demean",
      "description": "instead of correlation, do dot product of rows, then normalize by diagonal"
    },
    "opt_covariance": {
      "type": "boolean",
      "default": false,
      "title": "opt_covariance",
      "description": "compute covariance instead of correlation"
    },
    "opt_mem_limit_limit_gb": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "opt_mem_limit_limit_gb",
      "description": "restrict memory usage: memory limit in gigabytes"
    }
  },
  "additionalProperties": false,
  "required": [
    "cifti",
    "cifti_out",
    "@type"
  ]
}