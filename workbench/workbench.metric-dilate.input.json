{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "metric-dilate",
  "description": "DILATE A METRIC FILE.\n\nFor all metric vertices that are designated as bad, if they neighbor a non-bad vertex with data or are within the specified distance of such a vertex, replace the value with a distance-based weighted average of nearby non-bad vertices that have data, otherwise set the value to zero.  No matter how small <distance> is, dilation will always use at least the immediate neighbor vertices.  If -nearest is specified, it will use the value from the closest non-bad vertex with data within range instead of a weighted average.\n\nIf -bad-vertex-roi is specified, all vertices with a positive ROI value are bad.  If it is not specified, only vertices that have data, with a value of zero, are bad.  If -data-roi is not specified, all vertices are assumed to have data.\n\nNote that the -corrected-areas option uses an approximate correction for the change in distances along a group average surface.\n\nTo get the behavior of version 1.3.2 or earlier, use '-legacy-cutoff -exponent 2'.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "workbench/metric-dilate"
    },
    "metric": {
      "type": "string",
      "x-styx-type": "file",
      "description": "the metric to dilate"
    },
    "surface": {
      "type": "string",
      "x-styx-type": "file",
      "description": "the surface to compute on"
    },
    "distance": {
      "type": "number",
      "description": "distance in mm to dilate"
    },
    "metric-out": {
      "type": "string",
      "description": "the output metric"
    },
    "area-metric": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "vertex areas to use instead of computing them from the surface\n\nthe corrected vertex areas, as a metric"
    },
    "exponent": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "use a different exponent in the weighting function\n\nexponent 'n' to use in (area / (distance ^ n)) as the weighting function (default 6)"
    },
    "column": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "select a single column to dilate\n\nthe column number or name"
    },
    "roi-metric": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "specify an roi of vertices to overwrite, rather than vertices with value zero\n\nmetric file, positive values denote vertices to have their values replaced"
    },
    "legacy-cutoff": {
      "type": "boolean",
      "default": false,
      "description": "use the v1.3.2 method of choosing how many vertices to use when calulating the dilated value with weighted method"
    },
    "linear": {
      "type": "boolean",
      "default": false,
      "description": "fill in values with linear interpolation along strongest gradient"
    },
    "nearest": {
      "type": "boolean",
      "default": false,
      "description": "use the nearest good value instead of a weighted average"
    }
  },
  "additionalProperties": false,
  "required": [
    "metric",
    "surface",
    "distance",
    "metric-out",
    "@type"
  ]
}