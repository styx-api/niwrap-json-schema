{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "volume-gradient",
  "description": "GRADIENT OF A VOLUME FILE.\n\nComputes the gradient of the volume by doing linear regressions for each voxel, considering only its face neighbors unless too few face neighbors exist.  The gradient vector is constructed from the partial derivatives of the resulting linear function, and the magnitude of this vector is the output.  If specified, the volume vector output is arranged with the x, y, and z components from a subvolume as consecutive subvolumes.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "workbench/volume-gradient"
    },
    "volume-in": {
      "type": "string",
      "x-styx-type": "file",
      "description": "the input volume"
    },
    "volume-out": {
      "type": "string",
      "description": "the output gradient magnitude volume"
    },
    "presmooth": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "presmooth"
            },
            "kernel": {
              "type": "number",
              "description": "the size of the gaussian smoothing kernel in mm, as sigma by default"
            },
            "fwhm": {
              "type": "boolean",
              "default": false,
              "description": "kernel size is FWHM, not sigma"
            }
          },
          "additionalProperties": false,
          "description": "smooth the volume before computing the gradient",
          "required": [
            "kernel"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "smooth the volume before computing the gradient"
    },
    "vectors": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "vectors"
            },
            "vector-volume-out": {
              "type": "string",
              "description": "the vectors as a volume file"
            }
          },
          "additionalProperties": false,
          "description": "output vectors",
          "required": [
            "vector-volume-out"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "output vectors"
    },
    "subvol": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "select a single subvolume to take the gradient of\n\nthe subvolume number or name"
    },
    "roi-volume": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "select a region of interest to take the gradient of\n\nthe region to take the gradient within"
    }
  },
  "additionalProperties": false,
  "required": [
    "volume-in",
    "volume-out",
    "@type"
  ]
}