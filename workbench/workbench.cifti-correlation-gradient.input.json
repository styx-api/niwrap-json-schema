{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "cifti-correlation-gradient",
  "description": "CORRELATE CIFTI ROWS AND TAKE GRADIENT.\n\nFor each structure, compute the correlation of the rows in the structure, and take the gradients of the resulting rows, then average them.  Memory limit does not need to be an integer, you may also specify 0 to use as little memory as possible (this may be very slow).",
  "type": "object",
  "properties": {
    "@type": {
      "const": "workbench/cifti-correlation-gradient"
    },
    "cifti-out": {
      "type": "string",
      "description": "the output cifti"
    },
    "left-surface": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "left-surface"
            },
            "surface": {
              "type": "string",
              "x-styx-type": "file",
              "description": "the left surface file"
            },
            "area-metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "vertex areas to use instead of computing them from the left surface\n\nthe corrected vertex areas, as a metric"
            }
          },
          "additionalProperties": false,
          "description": "specify the left surface to use",
          "required": [
            "surface"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "specify the left surface to use"
    },
    "right-surface": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "right-surface"
            },
            "surface": {
              "type": "string",
              "x-styx-type": "file",
              "description": "the right surface file"
            },
            "area-metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "vertex areas to use instead of computing them from the right surface\n\nthe corrected vertex areas, as a metric"
            }
          },
          "additionalProperties": false,
          "description": "specify the right surface to use",
          "required": [
            "surface"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "specify the right surface to use"
    },
    "cerebellum-surface": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "cerebellum-surface"
            },
            "surface": {
              "type": "string",
              "x-styx-type": "file",
              "description": "the cerebellum surface file"
            },
            "area-metric": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "description": "vertex areas to use instead of computing them from the cerebellum surface\n\nthe corrected vertex areas, as a metric"
            }
          },
          "additionalProperties": false,
          "description": "specify the cerebellum surface to use",
          "required": [
            "surface"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "specify the cerebellum surface to use"
    },
    "double-correlation": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "double-correlation"
            },
            "covariance-first": {
              "type": "boolean",
              "default": false,
              "description": "instead of correlation for the FIRST operation, compute covariance"
            },
            "no-demean-first": {
              "type": "boolean",
              "default": false,
              "description": "instead of correlation for the FIRST operation, do dot product of rows, then normalize by diagonal"
            },
            "fisher-z-first": {
              "type": "boolean",
              "default": false,
              "description": "after the FIRST correlation, apply fisher small z transform (ie, artanh)"
            }
          },
          "additionalProperties": false,
          "description": "do two correlations before taking the gradient"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "do two correlations before taking the gradient"
    },
    "limit-GB": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "restrict memory usage\n\nmemory limit in gigabytes"
    },
    "distance": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "exclude vertices near each seed vertex from computation\n\ngeodesic distance from seed vertex for the exclusion zone, in mm"
    },
    "volume-kernel": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "smooth the volume before computing the gradient\n\nthe size of the gaussian volume smoothing kernel in mm, as sigma by default"
    },
    "surface-kernel": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "smooth on the surface before computing the gradient\n\nthe size of the gaussian surface smoothing kernel in mm, as sigma by default"
    },
    "covariance": {
      "type": "boolean",
      "default": false,
      "description": "compute covariance instead of correlation"
    },
    "fisher-z": {
      "type": "boolean",
      "default": false,
      "description": "apply the fisher small z transform to the correlations before taking the gradient"
    },
    "undo-fisher-z": {
      "type": "boolean",
      "default": false,
      "description": "apply the inverse fisher small z transform to the input"
    },
    "presmooth-fwhm": {
      "type": "boolean",
      "default": false,
      "description": "smoothing kernel sizes are FWHM, not sigma"
    },
    "cifti": {
      "type": "string",
      "x-styx-type": "file",
      "description": "the input cifti"
    }
  },
  "additionalProperties": false,
  "required": [
    "cifti-out",
    "cifti",
    "@type"
  ]
}