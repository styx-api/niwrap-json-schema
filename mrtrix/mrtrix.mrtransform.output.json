{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "mrtransform",
  "description": "Apply spatial transformations to an image.\n\nIf a linear transform is applied without a template image the command will modify the image header transform matrix\n\nFOD reorientation (with apodised point spread functions) can be performed if the number of volumes in the 4th dimension equals the number of coefficients in an antipodally symmetric spherical harmonic series (e.g. 6, 15, 28 etc). For such data, the -reorient_fod yes/no option must be used to specify if reorientation is required.\n\nThe output image intensity can be modulated using the (local or global) volume change if a linear or nonlinear transformation is applied. 'FOD' modulation preserves the apparent fibre density across the fibre bundle width and can only be applied if FOD reorientation is used. Alternatively, non-directional scaling by the Jacobian determinant can be applied to any image type. \n\nIf a DW scheme is contained in the header (or specified separately), and the number of directions matches the number of volumes in the images, any transformation applied using the -linear option will also be applied to the directions.\n\nWhen the -template option is used to specify the target image grid, the image provided via this option will not influence the axis data strides of the output image; these are determined based on the input image, or the input to the -strides option.\n\nReferences:\n\n* If FOD reorientation is being performed:\nRaffelt, D.; Tournier, J.-D.; Crozier, S.; Connelly, A. & Salvado, O. Reorientation of fiber orientation distributions using apodized point spread functions. Magnetic Resonance in Medicine, 2012, 67, 844-855\n\n* If FOD modulation is being performed:\nRaffelt, D.; Tournier, J.-D.; Rose, S.; Ridgway, G.R.; Henderson, R.; Crozier, S.; Salvado, O.; Connelly, A.; Apparent Fibre Density: a novel measure for the analysis of diffusion-weighted magnetic resonance images. NeuroImage, 2012, 15;59(4), 3976-94",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "root": {
      "type": "string",
      "title": "Root",
      "description": "Output root directory"
    },
    "output": {
      "type": "string",
      "title": "output",
      "description": "the output image."
    },
    "export_grad_mrtrix": {
      "type": "string",
      "title": "export_grad_mrtrix",
      "description": "export the diffusion-weighted gradient table to file in MRtrix format "
    },
    "mrtransform": {
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "root": {
              "type": "string",
              "title": "Root",
              "description": "Output root directory"
            },
            "bvecs_path": {
              "type": "string",
              "title": "bvecs_path",
              "description": "export the diffusion-weighted gradient table to files in FSL (bvecs / bvals) format"
            },
            "bvals_path": {
              "type": "string",
              "title": "bvals_path",
              "description": "export the diffusion-weighted gradient table to files in FSL (bvecs / bvals) format"
            }
          }
        },
        {
          "type": "null"
        }
      ]
    }
  }
}