{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Generate a 5TT image suitable for ACT.\n\n5ttgen acts as a 'master' script for generating a five-tissue-type (5TT) segmented tissue image suitable for use in Anatomically-Constrained Tractography (ACT). A range of different algorithms are available for completing this task. When using this script, the name of the algorithm to be used must appear as the first argument on the command-line after '5ttgen'. The subsequent compulsory arguments and options available depend on the particular algorithm being invoked.\nEach algorithm available also has its own help page, including necessary references; e.g. to see the help page of the 'fsl' algorithm, type '5ttgen fsl'.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "mrtrix.5ttgen"
    },
    "algorithm": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "freesurfer"
            },
            "input": {
              "type": "string",
              "x-styx-type": "file",
              "title": "input",
              "description": "The input FreeSurfer parcellation image (any image containing 'aseg' in its name)"
            },
            "output": {
              "type": "string",
              "title": "output",
              "description": "The output 5TT image"
            },
            "lut": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "lut",
              "description": "Manually provide path to the lookup table on which the input parcellation image is based (e.g. FreeSurferColorLUT.txt)"
            }
          },
          "additionalProperties": false,
          "description": "Generate the 5TT image based on a FreeSurfer parcellation image",
          "required": [
            "input",
            "output"
          ]
        },
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "fsl"
            },
            "input": {
              "type": "string",
              "x-styx-type": "file",
              "title": "input",
              "description": "The input T1-weighted image"
            },
            "output": {
              "type": "string",
              "title": "output",
              "description": "The output 5TT image"
            },
            "t2": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "t2",
              "description": "Provide a T2-weighted image in addition to the default T1-weighted image; this will be used as a second input to FSL FAST"
            },
            "mask": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "mask",
              "description": "Manually provide a brain mask, rather than deriving one in the script"
            },
            "premasked": {
              "type": "boolean",
              "default": false,
              "title": "premasked",
              "description": "Indicate that brain masking has already been applied to the input image"
            }
          },
          "additionalProperties": false,
          "description": "Use FSL commands to generate the 5TT image based on a T1-weighted image",
          "required": [
            "input",
            "output"
          ]
        },
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "gif"
            },
            "input": {
              "type": "string",
              "x-styx-type": "file",
              "title": "input",
              "description": "The input Geodesic Information Flow (GIF) segmentation image"
            },
            "output": {
              "type": "string",
              "title": "output",
              "description": "The output 5TT image"
            }
          },
          "additionalProperties": false,
          "description": "Generate the 5TT image based on a Geodesic Information Flow (GIF) segmentation image",
          "required": [
            "input",
            "output"
          ]
        },
        {
          "type": "object",
          "properties": {
            "@type": {
              "const": "hsvs"
            },
            "input": {
              "type": "string",
              "x-styx-type": "file",
              "title": "input",
              "description": "The input FreeSurfer subject directory"
            },
            "output": {
              "type": "string",
              "title": "output",
              "description": "The output 5TT image"
            },
            "template": {
              "anyOf": [
                {
                  "type": "string",
                  "x-styx-type": "file"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "template",
              "description": "Provide an image that will form the template for the generated 5TT image"
            },
            "hippocampi": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "hippocampi",
              "description": "Select method to be used for hippocampi (& amygdalae) segmentation; options are: subfields,first,aseg"
            },
            "thalami": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": null,
              "title": "thalami",
              "description": "Select method to be used for thalamic segmentation; options are: nuclei,first,aseg"
            },
            "white_stem": {
              "type": "boolean",
              "default": false,
              "title": "white_stem",
              "description": "Classify the brainstem as white matter"
            }
          },
          "additionalProperties": false,
          "description": "Generate a 5TT image based on Hybrid Surface and Volume Segmentation (HSVS), using FreeSurfer and FSL tools",
          "required": [
            "input",
            "output"
          ]
        }
      ],
      "title": "algorithm",
      "description": "Select the algorithm to be used to complete the script operation; additional details and options become available once an algorithm is nominated. Options are: freesurfer, fsl, gif, hsvs"
    },
    "nocrop": {
      "type": "boolean",
      "default": false,
      "title": "nocrop",
      "description": "Do NOT crop the resulting 5TT image to reduce its size (keep the same dimensions as the input image)"
    },
    "sgm_amyg_hipp": {
      "type": "boolean",
      "default": false,
      "title": "sgm_amyg_hipp",
      "description": "Represent the amygdalae and hippocampi as sub-cortical grey matter in the 5TT image"
    },
    "nocleanup": {
      "type": "boolean",
      "default": false,
      "title": "nocleanup",
      "description": "do not delete intermediate files during script execution, and do not delete scratch directory at script completion."
    },
    "scratch": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "scratch",
      "description": "manually specify the path in which to generate the scratch directory."
    },
    "continue": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "continue",
      "description": "continue the script from a previous execution; must provide the scratch directory path, and the name of the last successfully-generated file."
    },
    "info": {
      "type": "boolean",
      "default": false,
      "title": "info",
      "description": "display information messages."
    },
    "quiet": {
      "type": "boolean",
      "default": false,
      "title": "quiet",
      "description": "do not display information messages or progress status; alternatively, this can be achieved by setting the MRTRIX_QUIET environment variable to a non-empty string."
    },
    "debug": {
      "type": "boolean",
      "default": false,
      "title": "debug",
      "description": "display debugging messages."
    },
    "force": {
      "type": "boolean",
      "default": false,
      "title": "force",
      "description": "force overwrite of output files (caution: using the same file as input and output might cause unexpected behaviour)."
    },
    "nthreads": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "nthreads",
      "description": "use this number of threads in multi-threaded applications (set to 0 to disable multi-threading)."
    },
    "config": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "@type": {
                "const": "config"
              },
              "key": {
                "type": "string",
                "title": "key",
                "description": "temporarily set the value of an MRtrix config file entry."
              },
              "value": {
                "type": "string",
                "title": "value",
                "description": "temporarily set the value of an MRtrix config file entry."
              }
            },
            "additionalProperties": false,
            "description": "temporarily set the value of an MRtrix config file entry.",
            "required": [
              "key",
              "value"
            ]
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "temporarily set the value of an MRtrix config file entry."
    },
    "help": {
      "type": "boolean",
      "default": false,
      "title": "help",
      "description": "display this information page and exit."
    },
    "version": {
      "type": "boolean",
      "default": false,
      "title": "version",
      "description": "display version information and exit."
    }
  },
  "additionalProperties": false,
  "required": [
    "algorithm"
  ]
}