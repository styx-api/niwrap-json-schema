{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Quantitative evaluation tool of XTRACT results in neuroimaging",
  "type": "object",
  "properties": {
    "@type": {
      "const": "fsl.xtract_stats"
    },
    "folder_basename": {
      "type": "string",
      "title": "Folder Basename",
      "description": "Path to microstructure folder and basename of data (e.g. /home/DTI/dti_)"
    },
    "XTRACT_dir": {
      "type": "string",
      "title": "XTRACT Output Directory",
      "description": "Path to XTRACT output folder"
    },
    "xtract2diff": {
      "type": "string",
      "title": "Xtract to Diffusion Transform",
      "description": "EITHER XTRACT results to diffusion space transform OR 'native' if tracts are already in diffusion space"
    },
    "reference_image": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Reference Image",
      "description": "If not 'native', provide reference image in diffusion space (e.g. /home/DTI/dti_FA)"
    },
    "output_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output File",
      "description": "Output filepath (Default <XTRACT_dir>/stats.csv)"
    },
    "structures_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Structures File",
      "description": "Structures file (as in XTRACT) (Default is all tracts under <XTRACT_dir>)"
    },
    "threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Threshold",
      "description": "Threshold applied to tract probability map (default = 0.001 = 0.1%)"
    },
    "measurements": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Measurements",
      "description": "Comma separated list of features to extract (Default = vol,prob,length,FA,MD - assumes DTI folder has been provided). vol = tract volume, prob = tract probability, length = tract length. Additional metrics must follow file naming conventions. e.g. for dti_L1 use 'L1'"
    },
    "keep_temp_files": {
      "type": "boolean",
      "default": false,
      "title": "Keep Temporary Files",
      "description": "Keep temporary files"
    }
  },
  "additionalProperties": false,
  "required": [
    "folder_basename",
    "XTRACT_dir",
    "xtract2diff"
  ]
}