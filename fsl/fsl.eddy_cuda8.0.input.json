{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "eddy_cuda8.0",
  "description": "A tool for correcting eddy currents and movements in diffusion data",
  "type": "object",
  "properties": {
    "@type": {
      "const": "fsl/eddy_cuda8.0"
    },
    "imain": {
      "type": "string",
      "x-styx-type": "file",
      "title": "imain",
      "description": "File containing all the images to estimate distortions for"
    },
    "mask": {
      "type": "string",
      "x-styx-type": "file",
      "title": "mask",
      "description": "Mask to indicate brain"
    },
    "index": {
      "type": "string",
      "x-styx-type": "file",
      "title": "index",
      "description": "File containing indices for all volumes in --imain into --acqp and --topup"
    },
    "acqp": {
      "type": "string",
      "x-styx-type": "file",
      "title": "acqp",
      "description": "File containing acquisition parameters"
    },
    "bvecs": {
      "type": "string",
      "x-styx-type": "file",
      "title": "bvecs",
      "description": "File containing the b-vectors for all volumes in --imain"
    },
    "bvals": {
      "type": "string",
      "x-styx-type": "file",
      "title": "bvals",
      "description": "File containing the b-values for all volumes in --imain"
    },
    "out": {
      "type": "string",
      "default": "eddy_corrected",
      "title": "out",
      "description": "Basename for output"
    },
    "mb": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mb",
      "description": "Multi-band factor"
    },
    "mb_offs": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mb_offs",
      "description": "Multi-band offset (-1 if bottom slice removed, 1 if top slice removed)"
    },
    "slspec": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "slspec",
      "description": "Name of text file completely specifying slice/group acuistion. N.B. --slspec and --json are mutually exclusive."
    },
    "json": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "json",
      "description": "Name of .json text file with information about slice timing. N.B. --json and --slspec are mutually exclusive."
    },
    "mporder": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mporder",
      "description": "Order of slice-to-vol movement model (default 0, i.e. vol-to-vol"
    },
    "s2v_lambda": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "s2v_lambda",
      "description": "Regularisation weight for slice-to-vol movement. (default 1, reasonable range 1--10)"
    },
    "topup": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "topup",
      "description": "Base name for output files from topup"
    },
    "field": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "field",
      "description": "Name of file with susceptibility field (in Hz)"
    },
    "field_mat": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "field_mat",
      "description": "Name of rigid body transform for susceptibility field"
    },
    "flm": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "movement",
            "linear",
            "quadratic",
            "cubic"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "flm",
      "description": "First level EC model (movement/linear/quadratic/cubic, default quadratic)"
    },
    "slm": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "none",
            "linear",
            "quadratic"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "slm",
      "description": "Second level EC model (none/linear/quadratic, default none)"
    },
    "fwhm": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "fwhm",
      "description": "FWHM for conditioning filter when estimating the parameters (default 0)"
    },
    "niter": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "niter",
      "description": "Number of iterations (default 5)"
    },
    "s2v_niter": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "s2v_niter",
      "description": "Number of iterations for slice-to-vol (default 5)"
    },
    "cnr_maps": {
      "type": "boolean",
      "default": false,
      "title": "cnr_maps",
      "description": "Write shell-wise cnr-maps (default false)"
    },
    "residuals": {
      "type": "boolean",
      "default": false,
      "title": "residuals",
      "description": "Write residuals (between GP and observations), (default false)"
    },
    "fep": {
      "type": "boolean",
      "default": false,
      "title": "fep",
      "description": "Fill empty planes in x- or y-directions (default false)"
    },
    "interp": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "spline",
            "trilinear"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "interp",
      "description": "Interpolation model for estimation step (spline/trilinear, default spline)"
    },
    "s2v_interp": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "spline",
            "trilinear"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "s2v_interp",
      "description": "Slice-to-vol interpolation model for estimation step (spline/trilinear, default trilinear)"
    },
    "resamp": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "jac",
            "lsr"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "resamp",
      "description": "Final resampling method (jac/lsr, default jac)"
    },
    "nvoxhp": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "nvoxhp",
      "description": "# of voxels used to estimate the hyperparameters (default 1000)"
    },
    "initrand": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "initrand",
      "description": "Seeds rand for when selecting voxels (default 0=no seeding)"
    },
    "ff": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ff",
      "description": "Fudge factor for hyperparameter error variance (default 10.0)"
    },
    "repol": {
      "type": "boolean",
      "default": false,
      "title": "repol",
      "description": "Detect and replace outlier slices (default false))"
    },
    "ol_nstd": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ol_nstd",
      "description": "Number of std off to qualify as outlier (default 4)"
    },
    "ol_nvox": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ol_nvox",
      "description": "Min # of voxels in a slice for inclusion in outlier detection (default 250)"
    },
    "ol_type": {
      "anyOf": [
        {
          "type": "string",
          "enum": [
            "sw",
            "gw",
            "both"
          ]
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ol_type",
      "description": "Type of outliers, slicewise (sw), groupwise (gw) or both (both). (default sw)"
    },
    "ol_pos": {
      "type": "boolean",
      "default": false,
      "title": "ol_pos",
      "description": "Consider both positive and negative outliers if set (default false)"
    },
    "ol_sqr": {
      "type": "boolean",
      "default": false,
      "title": "ol_sqr",
      "description": "Consider outliers among sums-of-squared differences if set (default false)"
    },
    "estimate_move_by_susceptibility": {
      "type": "boolean",
      "default": false,
      "title": "estimate_move_by_susceptibility",
      "description": "Estimate how susceptibility field changes with subject movement (default false)"
    },
    "mbs_niter": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mbs_niter",
      "description": "Number of iterations for MBS estimation (default 10)"
    },
    "mbs_lambda": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mbs_lambda",
      "description": "Weighting of regularisation for MBS estimation (default 10)"
    },
    "mbs_ksp": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "mbs_ksp",
      "description": "Knot-spacing for MBS field estimation (default 10mm)"
    },
    "dont_sep_offs_move": {
      "type": "boolean",
      "default": false,
      "title": "dont_sep_offs_move",
      "description": "Do NOT attempt to separate field offset from subject movement (default false)"
    },
    "dont_peas": {
      "type": "boolean",
      "default": false,
      "title": "dont_peas",
      "description": "Do NOT perform a post-eddy alignment of shells (default false)"
    },
    "data_is_shelled": {
      "type": "boolean",
      "default": false,
      "title": "data_is_shelled",
      "description": "Assume, don't check, that data is shelled (default false)"
    },
    "verbose": {
      "type": "boolean",
      "default": false,
      "title": "verbose",
      "description": "switch on diagnostic messages"
    }
  },
  "additionalProperties": false,
  "required": [
    "imain",
    "mask",
    "index",
    "acqp",
    "bvecs",
    "bvals",
    "@type"
  ]
}