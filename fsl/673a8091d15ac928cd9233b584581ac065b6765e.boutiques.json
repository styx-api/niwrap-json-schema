{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "FSL tool for calculating statistics on image data",
  "type": "object",
  "properties": {
    "__STYXTYPE__": {
      "const": "fslstats"
    },
    "input_file": {
      "type": "string",
      "title": "Input file",
      "description": "Input image file (e.g., image.nii.gz)"
    },
    "index_mask": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Index mask",
      "description": "Generate separate n submasks from indexMask, for indexvalues 1..n where n is the maximum index value in indexMask, and generate statistics for each submask"
    },
    "lower_threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Lower threshold",
      "description": "Set lower threshold"
    },
    "upper_threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Upper threshold",
      "description": "Set upper threshold"
    },
    "robust_intensity_flag": {
      "type": "boolean",
      "default": false,
      "title": "Robust intensity flag",
      "description": "Output robust min and max intensity"
    },
    "minmax_intensity_flag": {
      "type": "boolean",
      "default": false,
      "title": "Min-max intensity flag",
      "description": "Output min and max intensity"
    },
    "voxels_volume_flag": {
      "type": "boolean",
      "default": false,
      "title": "Voxels and volume flag",
      "description": "Output voxels and volume"
    },
    "nonzero_voxels_volume_flag": {
      "type": "boolean",
      "default": false,
      "title": "Nonzero voxels and volume flag",
      "description": "Output voxels and volume (for nonzero voxels)"
    },
    "mean_flag": {
      "type": "boolean",
      "default": false,
      "title": "Mean flag",
      "description": "Output mean"
    },
    "nonzero_mean_flag": {
      "type": "boolean",
      "default": false,
      "title": "Nonzero mean flag",
      "description": "Output mean (for nonzero voxels)"
    },
    "std_dev_flag": {
      "type": "boolean",
      "default": false,
      "title": "Standard deviation flag",
      "description": "Output standard deviation"
    },
    "nonzero_std_dev_flag": {
      "type": "boolean",
      "default": false,
      "title": "Nonzero standard deviation flag",
      "description": "Output standard deviation (for nonzero voxels)"
    },
    "smallest_roi_flag": {
      "type": "boolean",
      "default": false,
      "title": "Smallest ROI flag",
      "description": "Output smallest ROI containing nonzero voxels"
    },
    "max_coords_flag": {
      "type": "boolean",
      "default": false,
      "title": "Max coordinates flag",
      "description": "Output coordinates of maximum voxel"
    },
    "min_coords_flag": {
      "type": "boolean",
      "default": false,
      "title": "Min coordinates flag",
      "description": "Output coordinates of minimum voxel"
    },
    "cog_mm_flag": {
      "type": "boolean",
      "default": false,
      "title": "Center of gravity in mm flag",
      "description": "Output center-of-gravity (cog) in mm coordinates"
    },
    "cog_voxel_flag": {
      "type": "boolean",
      "default": false,
      "title": "Center of gravity in voxel flag",
      "description": "Output center-of-gravity (cog) in voxel coordinates"
    },
    "percentile": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Nth percentile",
      "description": "Output nth percentile"
    },
    "nonzero_percentile": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Nth percentile for nonzero voxels",
      "description": "Output nth percentile (for nonzero voxels)"
    },
    "absolute_values_flag": {
      "type": "boolean",
      "default": false,
      "title": "Absolute values flag",
      "description": "Use absolute values of all image intensities"
    },
    "nan_as_zero_flag": {
      "type": "boolean",
      "default": false,
      "title": "NaN as zero flag",
      "description": "Treat NaN or Inf as zero for subsequent stats"
    },
    "mask_image": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask image",
      "description": "Use the specified image for masking - overrides lower and upper thresholds"
    },
    "difference_image": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Difference image",
      "description": "Take the difference between the base image and the image specified here"
    },
    "hist_bins": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Histogram bins",
      "description": "Output a histogram for the thresholded/masked voxels only with specified number of bins"
    },
    "hist_bins_min_max": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Histogram bins with limits",
      "description": "Output a histogram for the thresholded/masked voxels only with specified number of bins and histogram limits of min and max"
    },
    "timeseries_flag": {
      "type": "boolean",
      "default": false,
      "title": "Timeseries flag",
      "description": "Separate output line for each 3D volume of a 4D timeseries"
    },
    "mean_entropy_flag": {
      "type": "boolean",
      "default": false,
      "title": "Mean entropy flag",
      "description": "Output mean entropy; mean(-i*ln(i))"
    },
    "nonzero_mean_entropy_flag": {
      "type": "boolean",
      "default": false,
      "title": "Nonzero mean entropy flag",
      "description": "Output mean entropy (of nonzero voxels)"
    }
  },
  "additionalProperties": false,
  "required": [
    "input_file"
  ]
}