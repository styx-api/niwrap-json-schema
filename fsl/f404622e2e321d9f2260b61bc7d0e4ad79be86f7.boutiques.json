{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "General Linear Model fitting with autocorrelation in FMRI",
  "type": "object",
  "properties": {
    "@type": {
      "const": "fsl.film_gls"
    },
    "infile": {
      "type": "string",
      "title": "Input file",
      "description": "Input data file (NIFTI for volumetric, GIFTI for surface)"
    },
    "ac_flag": {
      "type": "boolean",
      "default": false,
      "title": "Autocorrelation estimation only",
      "description": "Perform autocorrelation estimation only"
    },
    "threshold": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Initial threshold",
      "description": "Initial threshold to apply to input data"
    },
    "ar_flag": {
      "type": "boolean",
      "default": false,
      "title": "Autoregressive model flag",
      "description": "Fits autoregressive model - default is to use tukey with M=sqrt(numvols)"
    },
    "noest_flag": {
      "type": "boolean",
      "default": false,
      "title": "No autocorrelation estimation flag",
      "description": "Do not estimate autocorrelations"
    },
    "outputPW_flag": {
      "type": "boolean",
      "default": false,
      "title": "Output PW data",
      "description": "Output prewhitened data and average design matrix"
    },
    "pava_flag": {
      "type": "boolean",
      "default": false,
      "title": "PAVA autocorrelation estimation",
      "description": "Estimates autocorrelation using PAVA - default is to use tukey with M=sqrt(numvols)"
    },
    "sa_flag": {
      "type": "boolean",
      "default": false,
      "title": "Smooth autocorrelation estimates flag",
      "description": "Smooths autocorrelation estimates"
    },
    "verbose_flag": {
      "type": "boolean",
      "default": false,
      "title": "Verbose flag",
      "description": "Outputs full data"
    },
    "results_dir": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Results directory",
      "description": "Directory name to store results in, default is results"
    },
    "mode": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Analysis mode",
      "description": "Analysis mode, options are volumetric (default) or surface. Caution: surface-based functionality is still BETA"
    },
    "input_surface": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input surface file",
      "description": "Input surface for autocorrelation smoothing in surface-based analyses"
    },
    "mean_func_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mean function file",
      "description": "Re-estimate mean_func baseline - for use with perfusion subtraction"
    },
    "min_timepoint_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Minimum timepoint file",
      "description": "Minimum timepoint file"
    },
    "paradigm_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Paradigm file",
      "description": "Paradigm file"
    },
    "t_contrasts_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "T-contrasts file",
      "description": "T-contrasts file"
    },
    "f_contrasts_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "F-contrasts file",
      "description": "F-contrasts file"
    },
    "epith": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "SUSAN brightness threshold",
      "description": "SUSAN brightness threshold for volumetric analysis/smoothing sigma for surface analysis"
    },
    "ms": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "SUSAN mask size",
      "description": "SUSAN mask size for volumetric analysis/smoothing extent for surface analysis"
    },
    "tukey": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Tukey window size",
      "description": "Uses tukey window to estimate autocorrelation with window size num - default is to use tukey with M=sqrt(numvols)"
    },
    "mt": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Multitapering time-bandwidth product",
      "description": "Uses multitapering with slepian tapers and num is the time-bandwidth product - default is to use tukey with M=sqrt(numvols)"
    },
    "ven": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Voxelwise EVs positions",
      "description": "List of numbers indicating voxelwise EVs position in the design matrix (list order corresponds to files in vxf option). Caution BETA option, only use with volumetric analysis."
    },
    "vef": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Voxelwise EVs files",
      "description": "List of 4D images containing voxelwise EVs (list order corresponds to numbers in vxl option). Caution BETA option, only use with volumetric analysis."
    }
  },
  "additionalProperties": false,
  "required": [
    "infile"
  ]
}