{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "BIANCA: Brain Intensity AbNormality Classification Algorithm",
  "type": "object",
  "properties": {
    "@type": {
      "const": "fsl.bianca"
    },
    "master_file": {
      "type": "string",
      "title": "Master file",
      "description": "Name of the master file"
    },
    "label_feature_num": {
      "type": "number",
      "title": "Label feature number",
      "description": "Column number (in the master file) of the manual masks (or any placeholder name for query subjects)"
    },
    "brain_mask_feature_num": {
      "type": "number",
      "title": "Brain mask feature number",
      "description": "Column number (in the master file) of images to derive non-zero mask from"
    },
    "query_subject_num": {
      "type": "number",
      "title": "Query subject number",
      "description": "Row number of query subject (in masterlistfile)"
    },
    "training_nums": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Training numbers",
      "description": "Subjects to be used in training. List of row numbers (comma separated, no spaces) or 'all' to use all the subjects in the master file"
    },
    "feature_subset": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Feature subset",
      "description": "Set of column numbers (comma separated and no spaces) for features/images to use (default: use all available modalities as intensity features). The image used to derive non-zero mask from must be part of the features subset"
    },
    "mat_feature_num": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Matrix feature number",
      "description": "Column number of matrix files (in masterlistfile). Needed to extract spatial features (MNI coordinates)"
    },
    "spatial_weight": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": 1,
      "title": "Spatial weight",
      "description": "Weighting for spatial coordinates (default = 1, i.e., variance-normalized MNI coordinates). Requires --matfeaturenum to be specified"
    },
    "patch_sizes": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Patch sizes",
      "description": "List of patch sizes for local averaging"
    },
    "patch_3d": {
      "type": "boolean",
      "default": false,
      "title": "3D patches",
      "description": "Use 3D patches (default is 2D)"
    },
    "select_pts": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": "any",
      "title": "Select points",
      "description": "\"any\" (default) or \"surround\" or \"noborder\""
    },
    "training_pts": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Training points",
      "description": "Number (max) of (lesion) points to use (per training subject) or \"equalpoints\" to select all lesion points and equal number of non-lesion points"
    },
    "non_les_pts": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Non-lesion points",
      "description": "Number (max) of non-lesion points to use. If not specified will be set to the same amount of lesion points"
    },
    "load_classifier_data": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Load classifier data",
      "description": "Load training data from file"
    },
    "save_classifier_data": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Save classifier data",
      "description": "Save training data to file"
    },
    "verbose_flag": {
      "type": "boolean",
      "default": false,
      "title": "Verbose flag",
      "description": "Use verbose mode"
    },
    "out_name": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": "output_bianca",
      "title": "Output name",
      "description": "Specify (base) output name of files"
    }
  },
  "additionalProperties": false,
  "required": [
    "master_file",
    "label_feature_num",
    "brain_mask_feature_num",
    "query_subject_num"
  ]
}