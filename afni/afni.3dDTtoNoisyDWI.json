{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Generate a synthetic set of DWI measures with a given SNR from an AFNI-style DT file and a set of gradients. This can be useful for simulations and testing.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.3dDTtoNoisyDWI"
    },
    "dt_file": {
      "type": "string",
      "x-styx-type": "file",
      "title": "DT file",
      "description": "Diffusion tensor file with six bricks of DT components ordered in the AFNI manner: Dxx,Dxy,Dyy,Dxz,Dyz,Dzz."
    },
    "grad_file": {
      "type": "string",
      "x-styx-type": "file",
      "title": "Gradient file",
      "description": "Text file of gradients arranged in three columns. There should be no row of all zeros representing the b=0 line."
    },
    "noise_dwi": {
      "type": "number",
      "title": "Noise fraction in DWI",
      "description": "Fractional value of noise in DWIs. FF = sigma/S0 = 1/SNR0. For example, FF=0.05 corresponds to SNR0=20."
    },
    "noise_b0": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Noise fraction in B0",
      "description": "Optional fraction of Rician noise in the b=0 reference image. If not provided, FF2=FF."
    },
    "prefix": {
      "type": "string",
      "title": "Output file prefix",
      "description": "Output file name prefix. Will have N+1 bricks when GRADFILE has N rows of gradients."
    },
    "mask": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask file",
      "description": "Optional mask within which to calculate uncertainty. Data should be masked already otherwise."
    },
    "bval": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "B-value factor",
      "description": "Optional DW factor to use if DT values are scaled to something physical. Default is BB=1."
    },
    "s0": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Reference b=0 signal strength",
      "description": "Optional reference b=0 signal strength. Default value is SS=1000."
    }
  },
  "additionalProperties": false,
  "required": [
    "dt_file",
    "grad_file",
    "noise_dwi",
    "prefix"
  ]
}