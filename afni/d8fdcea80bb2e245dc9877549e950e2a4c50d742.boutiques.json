{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Computes the Singular Value Decomposition (SVD) of the time series from a neighborhood of each voxel in a 3D+time dataset, which serves as a smoothing method for the dataset.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.3dLocalPV"
    },
    "input_dataset": {
      "type": "string",
      "title": "Input Dataset",
      "description": "Input time series dataset"
    },
    "mask": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask Dataset",
      "description": "Restrict operations to this mask"
    },
    "automask": {
      "type": "boolean",
      "default": false,
      "title": "Automask flag",
      "description": "Create a mask from the time series dataset"
    },
    "prefix": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prefix for SVD result",
      "description": "Save SVD vector result into this new dataset [default = 'LocalPV']"
    },
    "prefix2": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prefix for second principal vector",
      "description": "Save second principal vector into this new dataset [default = don't save it]"
    },
    "evprefix": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prefix for singular value",
      "description": "Save singular value at each voxel into this dataset [default = don't save]"
    },
    "neighborhood": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Neighborhood",
      "description": "Neighborhood definition (e.g., 'SPHERE(5)', 'TOHD(7)', etc.)"
    },
    "despike": {
      "type": "boolean",
      "default": false,
      "title": "Despike flag",
      "description": "Remove time series spikes from input dataset"
    },
    "polort": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Polort",
      "description": "Detrending"
    },
    "vnorm": {
      "type": "boolean",
      "default": false,
      "title": "Vnorm flag",
      "description": "Normalize data vectors [strongly recommended]"
    },
    "vproj": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Vproj",
      "description": "Project central data time series onto local SVD vector; if followed by '2', then the central data time series will be projected on the 2-dimensional subspace spanned by the first 2 principal SVD vectors. [default: just output principal singular vector]"
    }
  },
  "additionalProperties": false,
  "required": [
    "input_dataset"
  ]
}