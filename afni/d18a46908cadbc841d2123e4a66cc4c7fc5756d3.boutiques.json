{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Align a subject structural dataset to a template and perform several post-alignment operations",
  "type": "object",
  "properties": {
    "__STYXTYPE__": {
      "const": "@animal_warper"
    },
    "input_file": {
      "type": "string",
      "title": "Input File",
      "description": "input dataset to align to base template"
    },
    "base_template": {
      "type": "string",
      "title": "Base Template",
      "description": "base dataset (template) to align with"
    },
    "output_dir": {
      "type": "string",
      "title": "Output Directory",
      "description": "output directory where all processing will be performed"
    },
    "brainmask": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Brainmask",
      "description": "provide a brainmask in the base template space"
    },
    "atlases": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Atlas Datasets",
      "description": "one or more atlas datasets in the base volume space"
    },
    "atlas_followers": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Atlas Followers",
      "description": "one or more atlas datasets in the base volume space"
    },
    "seg_followers": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Segmentation Followers",
      "description": "one or more segmentation datasets in the base volume space"
    },
    "template_followers": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Template Followers",
      "description": "one or more datasets in the template volume space"
    },
    "dset_followers": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Dataset Followers",
      "description": "one or more datasets in the input volume space"
    },
    "roidset_followers": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ROIDSET Followers",
      "description": "one or more (int-valued) datasets in the input volume space"
    },
    "input_abbrev": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input Abbreviation",
      "description": "specify abbreviation for input dataset"
    },
    "base_abbrev": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Base Abbreviation",
      "description": "specify abbreviation for base dataset"
    },
    "atlas_abbrevs": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Atlas Abbreviations",
      "description": "specify an abbreviation for each atlas follower dataset"
    },
    "template_abbrevs": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Template Abbreviations",
      "description": "specify an abbreviation for each template follower dataset"
    },
    "seg_abbrevs": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Segmentation Abbreviations",
      "description": "specify an abbreviation for each segmentation follower dataset"
    },
    "dset_abbrevs": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Dataset Abbreviations",
      "description": "specify an abbreviation for each dataset follower dataset"
    },
    "roidset_abbrevs": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "ROI Dataset Abbreviations",
      "description": "specify an abbreviation for each ROI dataset follower dataset"
    },
    "align_centers_meth": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Align Centers Method",
      "description": "center alignment method to use"
    },
    "aff_move_opt": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Affine Move Options",
      "description": "alignment movement options for affine alignment step"
    },
    "cost": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Cost Function",
      "description": "cost function for affine and nonlinear alignment"
    },
    "maxlev": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0,
          "maximum": 11
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Maximum Level",
      "description": "Max level for nonlinear warping. Final patch size is determined based on this value."
    },
    "no_surfaces": {
      "type": "boolean",
      "default": false,
      "title": "No Surfaces Flag",
      "description": "Do not make surfaces for atlas regions in native space."
    },
    "feature_size": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Feature Size",
      "description": "Set feature size for affine alignment (in mm)"
    },
    "supersize": {
      "type": "boolean",
      "default": false,
      "title": "Supersize Flag",
      "description": "Allow up to 50% size difference between subject and template"
    },
    "init_scale": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Initial Scale",
      "description": "Approximate length ratio of input to template for initial scaling"
    },
    "mode_smooth_size": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Modal Smoothing Size",
      "description": "Modal smoothing kernel size in voxels"
    },
    "mode_smooth_replacement_off": {
      "type": "boolean",
      "default": false,
      "title": "Mode Smooth Replacement Off Flag",
      "description": "Turn off replacement in modal smoothing"
    },
    "center_out": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Center Output",
      "description": "Center native-space output to native original space or template space center-shifted"
    },
    "align_type": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Align Type",
      "description": "Specify level of alignment"
    },
    "extra_qw_opts": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Additional 3dQwarp Options",
      "description": "Additional options to add to existing options for 3dQwarp"
    },
    "keep_temp": {
      "type": "boolean",
      "default": false,
      "title": "Keep Temporary Files Flag",
      "description": "Keep temporary files including awpy directory and other intermediate datasets"
    },
    "version": {
      "type": "boolean",
      "default": false,
      "title": "Version Flag",
      "description": "Display the program version"
    },
    "ok_to_exist": {
      "type": "boolean",
      "default": false,
      "title": "OK to Exist Flag",
      "description": "Reuse and do not overwrite existing datasets"
    },
    "echo": {
      "type": "boolean",
      "default": false,
      "title": "Echo Flag",
      "description": "Copy all commands being run into the terminal"
    }
  },
  "additionalProperties": false,
  "required": [
    "input_file",
    "base_template",
    "output_dir"
  ]
}