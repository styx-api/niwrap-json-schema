{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Program to calculate the cross-correlation of an ideal reference waveform with the measured FMRI time series for each voxel.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.3dfim+"
    },
    "infile": {
      "type": "string",
      "title": "Input file",
      "description": "Filename of input 3d+time dataset"
    },
    "input1dfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input 1D file",
      "description": "Filename of single (fMRI) .1D time series"
    },
    "maskfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask file",
      "description": "Filename of 3d mask dataset"
    },
    "first_image": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of first dataset image",
      "description": "Number of first dataset image to use in the cross-correlation procedure (default = 0)"
    },
    "last_image": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of last dataset image",
      "description": "Number of last dataset image to use in the cross-correlation procedure (default = last)"
    },
    "baseline_polynomial": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Degree of baseline polynomial",
      "description": "Degree of polynomial corresponding to the baseline model (default: 1). Use -1 for no baseline model."
    },
    "threshold": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Threshold value",
      "description": "FIM internal mask threshold value (0 <= p <= 1) to get rid of low intensity voxels (default: 0.0999)"
    },
    "cdisp_value": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Correlation display value",
      "description": "Write (to screen) results for voxels whose correlation stat. > cval (0 <= cval <= 1; default: disabled)"
    },
    "ort_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Ort file",
      "description": "Input ort time series file name. Can be used multiple times."
    },
    "ideal_file": {
      "type": "string",
      "title": "Ideal file",
      "description": "Input ideal time series file name. Can be used multiple times."
    },
    "output_params": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output parameters",
      "description": "Output the specified parameter. Can be used multiple times. Possible values are: 'Fit Coef', 'Best Index', '% Change', 'Baseline', 'Correlation', '% From Ave', 'Average', '% From Top', 'Topline', 'Sigma Resid', 'All', 'Spearman CC', 'Quadrant CC'."
    },
    "output_bucket": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output bucket prefix",
      "description": "Create one AFNI 'bucket' dataset containing the parameters of interest, as specified by the '-out' commands. The output 'bucket' dataset is written to a file with the prefix name bprefix."
    }
  },
  "additionalProperties": false,
  "required": [
    "infile",
    "ideal_file"
  ]
}