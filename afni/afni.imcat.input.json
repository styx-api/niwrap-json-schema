{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "imcat",
  "description": "Assembles a set of images into an image matrix (IM) montage of NX by NY images.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.imcat"
    },
    "input_files": {
      "type": "array",
      "items": {
        "type": "string",
        "x-styx-type": "file"
      },
      "title": "Input files",
      "description": "Input image files"
    },
    "scale_image": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Scale image",
      "description": "Multiply each image IM(i,j) in output image matrix IM by the color or intensity of the pixel (i,j) in SCALE_IMG."
    },
    "scale_pixels": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Scale pixels",
      "description": "Multiply each pixel (i,j) in output image by the color or intensity of the pixel (i,j) in SCALE_IMG. SCALE_IMG is automatically resized to the resolution of the output image."
    },
    "scale_intensity": {
      "type": "boolean",
      "default": false,
      "title": "Scale intensity flag",
      "description": "Instead of multiplying by the color of pixel (i,j), use its intensity (average color)."
    },
    "gscale": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Global scale factor",
      "description": "Apply FAC in addition to scaling of -scale_* options."
    },
    "rgb_out": {
      "type": "boolean",
      "default": false,
      "title": "RGB output flag",
      "description": "Force output to be in RGB, even if input is bytes. This option is turned on automatically in certain cases."
    },
    "res_in": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "maxItems": 2
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input resolution",
      "description": "Set resolution of all input images to RX by RY pixels. Default is to make all input have the same resolution as the first image."
    },
    "respad_in": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "maxItems": 2
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input resolution with padding",
      "description": "Like -res_in, but resample to the max while respecting the aspect ratio, and then pad to achieve desired pixel count."
    },
    "pad_val": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0,
          "maximum": 255
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Padding value",
      "description": "Set the padding value, should it be needed by -respad_in to VAL. VAL is typecast to byte, default is 0, max is 255."
    },
    "crop": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "maxItems": 4
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Crop parameters",
      "description": "Crop images by L (Left), R (Right), T (Top), B (Bottom) pixels. Cutting is performed after any resolution change, if any, is to be done."
    },
    "autocrop_ctol": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Autocrop color tolerance",
      "description": "A line is eliminated if none of its R G B values differ by more than CTOL% from those of the corner pixel."
    },
    "autocrop_atol": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Autocrop average tolerance",
      "description": "A line is eliminated if none of its R G B values differ by more than ATOL% from those of line average."
    },
    "autocrop": {
      "type": "boolean",
      "default": false,
      "title": "Autocrop flag",
      "description": "This option is the same as using both of -autocrop_atol 20 and -autocrop_ctol 20"
    },
    "zero_wrap": {
      "type": "boolean",
      "default": false,
      "title": "Zero wrap flag",
      "description": "If number of images is not enough to fill matrix solid black images are used."
    },
    "white_wrap": {
      "type": "boolean",
      "default": false,
      "title": "White wrap flag",
      "description": "If number of images is not enough to fill matrix solid white images are used."
    },
    "gray_wrap": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0.0,
          "maximum": 1.0
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Gray wrap value",
      "description": "If number of images is not enough to fill matrix, solid gray images are used. GRAY must be between 0 and 1.0."
    },
    "image_wrap": {
      "type": "boolean",
      "default": false,
      "title": "Image wrap flag",
      "description": "If number of images is not enough to fill matrix, images on command line are reused (default)."
    },
    "rand_wrap": {
      "type": "boolean",
      "default": false,
      "title": "Random wrap flag",
      "description": "When reusing images to fill matrix, randomize the order in refill section only."
    },
    "prefix": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Prefix",
      "description": "Prefix the output files with string 'ppp'."
    },
    "matrix": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "maxItems": 2
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Matrix dimensions",
      "description": "Specify number of images in each row and column of IM at the same time."
    },
    "nx": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of rows",
      "description": "Number of images in each row."
    },
    "ny": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of columns",
      "description": "Number of images in each column."
    },
    "matrix_from_scale": {
      "type": "boolean",
      "default": false,
      "title": "Matrix from scale flag",
      "description": "Set NX and NY to be the same as the SCALE_IMG's dimensions. (needs -scale_image)"
    },
    "gap": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Gap width",
      "description": "Put a line G pixels wide between images."
    },
    "gap_col": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "number"
          },
          "maxItems": 3
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Gap color",
      "description": "Set color of line to R G B values. Values range between 0 and 255."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_files"
  ]
}