{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Functional Imaging Mapping Tool",
  "type": "object",
  "properties": {
    "__STYXTYPE__": {
      "const": "fim2"
    },
    "image_files": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "title": "Image files",
      "description": "Input MRI image files"
    },
    "pcnt": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Percent Correlation Threshold",
      "description": "Correlation coefficient threshold will be 1 - 0.01 * #"
    },
    "pcthresh": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Coefficient Threshold",
      "description": "Correlation coefficient threshold will be #"
    },
    "im1": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "First Image Index",
      "description": "Index of image file to use as first in time series; default is 1"
    },
    "num": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of Images",
      "description": "Number of images to actually use; default is to use all images"
    },
    "non": {
      "type": "boolean",
      "default": false,
      "title": "Disable Normalization",
      "description": "Turn off default normalization of the output activation image"
    },
    "coef": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Scaling Factor",
      "description": "Scaling factor to convert the activation output from floats to short ints"
    },
    "ort": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Orthogonalization Time Series",
      "description": "Filename of a time series to which the image data will be orthogonalized before correlations are computed"
    },
    "ideal": {
      "anyOf": [
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Ideal Time Series",
      "description": "Filename of a time series to which the image data is to be correlated"
    },
    "polref": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Polynomial Order",
      "description": "Use polynomials of order 0..# as extra 'orts'; default is 0"
    },
    "fimfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "FIM File",
      "description": "Filename to save activation magnitudes in"
    },
    "corr": {
      "type": "boolean",
      "default": false,
      "title": "Correlation Output Flag",
      "description": "Indicates to write correlation output to image file 'fimfile.CORR'"
    },
    "corfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Correlation File",
      "description": "Filename to save correlation image in"
    },
    "cnrfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "CNR File",
      "description": "Filename to save contrast-to-noise image in"
    },
    "sigfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Standard Deviation File",
      "description": "Filename to save standard deviation image in"
    },
    "fitfile": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Least Squares Fit Coefficients File",
      "description": "Image files of the least squares fit coefficients of all the -ort and -polref time series"
    },
    "subort": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Subtracted Ortho Reference Time Series",
      "description": "Filename of the new timeseries of images with the orts and polrefs subtracted out"
    },
    "flim": {
      "type": "boolean",
      "default": false,
      "title": "Floating-Point Output Flag",
      "description": "Write outputs in mrilib 'float' format"
    },
    "clean": {
      "type": "boolean",
      "default": false,
      "title": "Clean Output Flag",
      "description": "Output images won't have the +/- 10000 values forced into their corners for scaling purposes"
    },
    "clip": {
      "type": "boolean",
      "default": false,
      "title": "Clip Low Intensity Output Flag",
      "description": "Set to zero regions of low intensity in output correlations, etc."
    },
    "q": {
      "type": "boolean",
      "default": false,
      "title": "Quiet Flag",
      "description": "Quiet operation mode"
    },
    "dfspace": {
      "type": "boolean",
      "default": false,
      "title": "DF Space Filter Flag",
      "description": "Use the 'dfspace' filter to register the images spatially before filtering."
    },
    "regbase": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Base Registration Image",
      "description": "Read image in file 'fname' as the base image for registration"
    }
  },
  "additionalProperties": false,
  "required": [
    "image_files"
  ]
}