{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Nonlinear regression for each voxel of the input AFNI 3d+time data set",
  "type": "object",
  "properties": {
    "__STYXTYPE__": {
      "const": "3dNLfim"
    },
    "input_file": {
      "type": "string",
      "title": "Input file",
      "description": "Filename of 3d+time data file for input"
    },
    "signal_model": {
      "type": "string",
      "title": "Signal model",
      "description": "Name of the nonlinear signal model"
    },
    "noise_model": {
      "type": "string",
      "title": "Noise model",
      "description": "Name of the linear noise model"
    },
    "mask": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask file",
      "description": "Use the 0 sub-brick of dataset 'mset' as a mask to indicate which voxels to analyze"
    },
    "ignore": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Ignore initial images",
      "description": "Skip this number of initial images in the time series for regression analysis; default = 0"
    },
    "intr": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input TR",
      "description": "Set the TR of the input 3d+time dataset"
    },
    "tr": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Time series TR",
      "description": "Directly set the TR of the time series model"
    },
    "time_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Time file",
      "description": "ASCII file containing each time point in the time series."
    },
    "sconstr": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Signal parameter constraints",
      "description": "Constraints for signal parameters; c <= gs[k] <= d"
    },
    "nconstr": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Noise parameter constraints",
      "description": "Constraints for noise parameters; c+b[k] <= gn[k] <= d+b[k]"
    },
    "nabs": {
      "type": "boolean",
      "default": false,
      "title": "Absolute constraints flag",
      "description": "Use absolute constraints for noise parameters; c <= gn[k] <= d"
    },
    "nrand": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of random test points",
      "description": "Number of random test points; default=19999"
    },
    "nbest": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Best test points to start",
      "description": "Use b best test points to start; default=9"
    },
    "rmsmin": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Minimum RMS error",
      "description": "Minimum RMS error to reject reduced model"
    },
    "fdisp": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Display F-statistic threshold",
      "description": "Display results for those voxels whose F-statistic is greater than fval; default=999.0"
    },
    "progress": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Progress interval",
      "description": "Display results every ival number of voxels"
    },
    "voxel_count": {
      "type": "boolean",
      "default": false,
      "title": "Voxel count flag",
      "description": "Display the current voxel index"
    },
    "simplex": {
      "type": "boolean",
      "default": false,
      "title": "Nelder-Mead simplex method",
      "description": "Use Nelder-Mead simplex method for least-square minimization (default)"
    },
    "powell": {
      "type": "boolean",
      "default": false,
      "title": "Powell's NEWUOA method",
      "description": "Use Powell's NEWUOA method instead of Nelder-Mead simplex method"
    },
    "both": {
      "type": "boolean",
      "default": false,
      "title": "Use both minimization methods",
      "description": "Use both Powell's and Nelder-Mead method"
    },
    "freg": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "F-test regression filename prefix",
      "description": "Perform F-test for significance of the regression; output 'fift' is written to prefix filename fname"
    },
    "frsqr": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "R^2 calculation filename prefix",
      "description": "Calculate R^2 (coef. of multiple determination); store along with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "fsmax": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Signed maximum signal estimate filename prefix",
      "description": "Estimate signed maximum of signal; store along with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "ftmax": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Time of signed maximum estimate filename prefix",
      "description": "Estimate time of signed maximum; store along with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "fpsmax": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Maximum percentage change filename prefix",
      "description": "Calculate (signed) maximum percentage change of signal from baseline; output 'fift' is written to prefix filename fname"
    },
    "farea": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Area between signal and baseline filename prefix",
      "description": "Calculate area between signal and baseline; store with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "fparea": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Percentage area of signal filename prefix",
      "description": "Percentage area of signal relative to baseline; store with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "fscoef": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Signal parameter estimate filename prefix",
      "description": "Estimate kth signal parameter gs[k]; store along with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "fncoef": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Noise parameter estimate filename prefix",
      "description": "Estimate kth noise parameter gn[k]; store along with F-test for regression; output 'fift' is written to prefix filename fname"
    },
    "tscoef": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "T-test significance for signal parameter filename prefix",
      "description": "Perform t-test for significance of kth signal parameter gs[k]; output 'fitt' is written to prefix filename fname"
    },
    "tncoef": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "T-test significance for noise parameter filename prefix",
      "description": "Perform t-test for significance of kth noise parameter gn[k]; output 'fitt' is written to prefix filename fname"
    },
    "bucket": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "AFNI 'bucket' dataset prefix",
      "description": "Create one AFNI 'bucket' dataset containing n sub-bricks; n=0 creates default output; output 'bucket' is written to prefixname"
    },
    "brick": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Sub-brick specification",
      "description": "Specify sub-brick contents for 'bucket' dataset"
    },
    "nofdr": {
      "type": "boolean",
      "default": false,
      "title": "No FDR flag",
      "description": "Don't write the FDR (q vs. threshold) curves into the output dataset."
    },
    "sfit": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Signal fit prefix",
      "description": "Prefix for output 3d+time signal model fit"
    },
    "snfit": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Signal+noise fit prefix",
      "description": "Prefix for output 3d+time signal+noise fit"
    },
    "jobs": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of jobs",
      "description": "Run the program with 'J' jobs (sub-processes). 1 to 32."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_file",
    "signal_model",
    "noise_model"
  ]
}