{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Tool for smoothing data on surfaces using various methods.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.SurfSmooth"
    },
    "surface": {
      "type": "string",
      "title": "Surface File",
      "description": "Option for specifying the surface to smooth or the domain over which DSET is defined."
    },
    "method": {
      "type": "string",
      "title": "Smoothing Method",
      "description": "Name of smoothing method to use. Choose from: HEAT_07, HEAT_05, LM, NN_geom"
    },
    "input_data": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Input Data",
      "description": "File containing data (in 1D or NIML format). Required for HEAT_05 and HEAT_07 methods."
    },
    "target_fwhm": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Target FWHM",
      "description": "Blur so that the final FWHM of the data is TF mm. Only for HEAT_07 method."
    },
    "fwhm": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "FWHM",
      "description": "Effective Full Width at Half Maximum for smoothing. Required for HEAT_05 and optional for HEAT_07 methods."
    },
    "number_iterations": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Number of Iterations",
      "description": "Number of smoothing iterations (default is 100 for LM and NN_geom, -1 for HEAT methods)."
    },
    "output_file": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output File",
      "description": "Name of output file. Default based on method being used."
    },
    "band_pass_frequency": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Bandpass Frequency",
      "description": "Bandpass frequency for LM method (0 < k < 10)."
    },
    "lambda_mu": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Lambda and Mu parameters",
      "description": "Lambda and Mu parameters for LM method. Sample values are: 0.6307 and -0.6732."
    },
    "interp_weights": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Interpolation Weights",
      "description": "Set interpolation weights for LM method. Options: Equal, Fujiwara, Desbrun."
    },
    "node_mask": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Node Mask",
      "description": "Apply operations only to nodes listed in the given mask."
    },
    "surface_output": {
      "anyOf": [
        {
          "type": "string",
          "x-styx-type": "file"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Surface Output",
      "description": "Writes the surface with smoothed coordinates to disk. For LM and NN_geom methods."
    },
    "dbg_node": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Debug Node",
      "description": "Output debug information for node 'node'."
    },
    "use_neighbors_outside_mask": {
      "type": "boolean",
      "default": false,
      "title": "Use Neighbors Outside Mask",
      "description": "Allow value from a node neighboring node n to contribute to the value at n even if the neighbor is not in the mask."
    },
    "talk_suma": {
      "type": "boolean",
      "default": false,
      "title": "Talk to SUMA",
      "description": "Send progress with each iteration to SUMA for real-time visualization."
    },
    "refresh_rate": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Refresh Rate",
      "description": "Maximum number of updates to SUMA per second."
    }
  },
  "additionalProperties": false,
  "required": [
    "surface",
    "method"
  ]
}