{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "3dToutcount",
  "description": "Calculates the number of 'outliers' in a 3D+time dataset at each time point.",
  "type": "object",
  "properties": {
    "@type": {
      "const": "afni.3dToutcount"
    },
    "input_dataset": {
      "type": "string",
      "title": "Input dataset",
      "description": "Input 3D+time dataset (e.g. dataset+orig)"
    },
    "output_prefix": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Output prefix",
      "description": "Prefix of the new dataset saved with the outlier Q values, applicable with the -save option"
    },
    "mask_dataset": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Mask dataset",
      "description": "Only count voxels in the provided mask dataset"
    },
    "q_threshold": {
      "anyOf": [
        {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Q threshold",
      "description": "Use 'q' instead of 0.001 in the calculation of alpha. Must be within range 0 < q < 1."
    },
    "autoclip": {
      "type": "boolean",
      "default": false,
      "title": "Autoclip flag",
      "description": "Clip off 'small' voxels (as in 3dClipLevel). Cannot use with -mask."
    },
    "automask": {
      "type": "boolean",
      "default": false,
      "title": "Automask flag",
      "description": "Automatically mask the dataset. Cannot use with -mask."
    },
    "fraction": {
      "type": "boolean",
      "default": false,
      "title": "Fraction flag",
      "description": "Output the fraction of (masked) voxels which are outliers at each time point, instead of the count."
    },
    "range": {
      "type": "boolean",
      "default": false,
      "title": "Range flag",
      "description": "Print out median+3.5*MAD of outlier count with each time point."
    },
    "polort_order": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Polort order",
      "description": "Detrend each voxel time series with polynomials of order 'nn'. Default value is 0, which removes the median."
    },
    "legendre": {
      "type": "boolean",
      "default": false,
      "title": "Legendre flag",
      "description": "Use Legendre polynomials for detrending (also allows -polort > 3)."
    }
  },
  "additionalProperties": false,
  "required": [
    "input_dataset"
  ]
}